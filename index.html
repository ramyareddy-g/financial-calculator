<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Calculator</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        body {
            padding-top: 32px;
            background: linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%);
            min-height: 100vh;
            transition: background 0.3s;
        }
        .container {
            max-width: 900px;
            background: rgba(255,255,255,0.95);
            border-radius: 1.5rem;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            padding: 2rem 2.5rem 2.5rem 2.5rem;
            margin-bottom: 2rem;
        }
        .card {
            border: none;
            border-radius: 1rem;
            box-shadow: 0 4px 24px 0 rgba(31, 38, 135, 0.10);
            margin-bottom: 2rem;
            background: #f4f7fe;
        }
        .card-header {
            background: linear-gradient(90deg, #6366f1 0%, #60a5fa 100%);
            color: #fff;
            font-weight: 600;
            border-radius: 1rem 1rem 0 0;
            font-size: 1.2rem;
            letter-spacing: 0.5px;
        }
        .form-label {
            font-weight: 500;
            color: #374151;
        }
        .form-control {
            border-radius: 0.5rem;
            border: 1px solid #c7d2fe;
            box-shadow: none;
            transition: border-color 0.2s;
        }
        .form-control:focus {
            border-color: #6366f1;
            box-shadow: 0 0 0 0.2rem rgba(99,102,241,.15);
        }
        .btn-primary {
            background: linear-gradient(90deg, #6366f1 0%, #60a5fa 100%);
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px 0 rgba(99,102,241,0.10);
            transition: background 0.2s, box-shadow 0.2s;
        }
        .btn-primary:hover, .btn-primary:focus {
            background: linear-gradient(90deg, #4f46e5 0%, #2563eb 100%);
            box-shadow: 0 4px 16px 0 rgba(99,102,241,0.18);
        }
        .adsbygoogle {
            margin-bottom: 2rem;
        }
        .dark-mode {
            background: linear-gradient(135deg, #18181b 0%, #312e81 100%) !important;
        }
        .dark-mode .container {
            background: rgba(30, 41, 59, 0.98);
            color: #f1f5f9;
        }
        .dark-mode .card {
            background: #232946;
            color: #f1f5f9;
        }
        .dark-mode .card-header {
            background: linear-gradient(90deg, #818cf8 0%, #38bdf8 100%);
            color: #18181b;
        }
        .dark-mode .form-label {
            color: #c7d2fe;
        }
        .dark-mode .form-control {
            background: #18181b;
            color: #f1f5f9;
            border: 1px solid #818cf8;
        }
        .dark-mode .form-control:focus {
            border-color: #38bdf8;
            box-shadow: 0 0 0 0.2rem rgba(56,189,248,.15);
        }
        .dark-mode .btn-primary {
            background: linear-gradient(90deg, #818cf8 0%, #38bdf8 100%);
            color: #18181b;
        }
        .dark-mode .btn-primary:hover, .dark-mode .btn-primary:focus {
            background: linear-gradient(90deg, #6366f1 0%, #0ea5e9 100%);
        }
        .toggle-dark {
            position: absolute;
            top: 1.5rem;
            right: 2.5rem;
            z-index: 10;
        }
        .tab-content-section {
            display: none;
        }
        .tab-content-section.active {
            display: block;
        }
        .tabbar {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 100;
            background: #fff;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 60px;
            box-shadow: 0 -2px 12px 0 rgba(31, 38, 135, 0.07);
        }
        .tabbar .tab-btn {
            flex: 1;
            text-align: center;
            background: none;
            border: none;
            outline: none;
            font-size: 1.1rem;
            color: #6366f1;
            padding: 0.5rem 0 0.2rem 0;
            transition: color 0.2s;
        }
        .tabbar .tab-btn.active {
            color: #2563eb;
            font-weight: 600;
        }
        .tabbar .tab-btn svg {
            display: block;
            margin: 0 auto 2px auto;
        }
        @media (min-width: 768px) {
            .tabbar {
                display: none;
            }
            .tab-content-section {
                display: block !important;
            }
        }
        @media (max-width: 767px) {
            .container {
                padding-bottom: 80px;
            }
        }
    </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3915236085070408"
     crossorigin="anonymous"></script>
</head>
<body>
    <button class="btn btn-outline-secondary toggle-dark" id="toggleDark" title="Toggle dark mode">
        <svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-sun" viewBox="0 0 16 16" style="display:inline;"><path d="M8 4.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7zM8 1a.5.5 0 0 1 .5.5V3a.5.5 0 0 1-1 0V1.5A.5.5 0 0 1 8 1zm0 12a.5.5 0 0 1 .5.5V15a.5.5 0 0 1-1 0v-1.5a.5.5 0 0 1 .5-.5zm7-5a.5.5 0 0 1-.5.5H13a.5.5 0 0 1 0-1h1.5a.5.5 0 0 1 .5.5zm-12 0a.5.5 0 0 1-.5.5H1a.5.5 0 0 1 0-1h1.5a.5.5 0 0 1 .5.5zm9.657-4.657a.5.5 0 0 1 .707 0l1.06 1.06a.5.5 0 1 1-.707.708l-1.06-1.06a.5.5 0 0 1 0-.708zm-9.193 9.193a.5.5 0 0 1 .707 0l1.06 1.06a.5.5 0 1 1-.707.708l-1.06-1.06a.5.5 0 0 1 0-.708zm9.193 0a.5.5 0 0 1 0 .708l-1.06 1.06a.5.5 0 1 1-.707-.708l1.06-1.06a.5.5 0 0 1 .707 0zm-9.193-9.193a.5.5 0 0 1 0 .708l-1.06 1.06a.5.5 0 1 1-.707-.708l1.06-1.06a.5.5 0 0 1 .707 0z"/></svg>
        <svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-moon" viewBox="0 0 16 16" style="display:none;"><path d="M6 0a7 7 0 0 0 0 14c3.866 0 7-3.134 7-7 0-1.306-.417-2.518-1.12-3.535a.5.5 0 0 0-.832.555A6 6 0 1 1 6.98 1.02a.5.5 0 0 0 .555-.832A6.978 6.978 0 0 0 6 0z"/></svg>
    </button>
    <div class="container">
        <h1 class="mb-4 text-center">Financial Calculator</h1>
        <div class="mb-4 text-center">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-YOUR_ADSENSE_PUBLISHER_ID"
                 data-ad-slot="YOUR_AD_SLOT_ID"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <div id="cagrSection" class="tab-content-section active">
            <div class="card mb-4">
                <div class="card-header">
                    CAGR (Compound Annual Growth Rate)
                </div>
                <div class="card-body">
                    <form id="cagrForm">
                        <div class="mb-3">
                            <label for="initialValue" class="form-label">Initial Value</label>
                            <input type="number" class="form-control" id="initialValue" placeholder="e.g., 1000" required>
                        </div>
                        <div class="mb-3">
                            <label for="finalValue" class="form-label">Final Value</label>
                            <input type="number" class="form-control" id="finalValue" placeholder="e.g., 2500" required>
                        </div>
                        <div class="mb-3">
                            <label for="years" class="form-label">Number of Years</label>
                            <input type="number" class="form-control" id="years" placeholder="e.g., 5" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Calculate CAGR</button>
                    </form>
                    <div class="mt-3" id="cagrResult">
                        <!-- CAGR result will be displayed here -->
                    </div>
                </div>
            </div>
        </div>

        <div id="fvSection" class="tab-content-section">
            <div class="card mb-4">
                <div class="card-header">
                    Future Value
                </div>
                <div class="card-body">
                    <form id="futureValueForm">
                        <div class="mb-3">
                            <label for="presentValue" class="form-label">Present Value</label>
                            <input type="number" class="form-control" id="presentValue" placeholder="e.g., 1000" required>
                        </div>
                        <div class="mb-3">
                            <label for="interestRate" class="form-label">Annual Interest Rate (%)</label>
                            <input type="number" class="form-control" id="interestRate" placeholder="e.g., 5" required>
                        </div>
                        <div class="mb-3">
                            <label for="numPeriods" class="form-label">Number of Periods (Years)</label>
                            <input type="number" class="form-control" id="numPeriods" placeholder="e.g., 10" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Calculate Future Value</button>
                    </form>
                    <div class="mt-3" id="futureValueResult">
                        <!-- Future Value result will be displayed here -->
                    </div>
                </div>
            </div>
        </div>

        <div id="npvSection" class="tab-content-section">
            <div class="card mb-4">
                <div class="card-header">
                    Net Present Value (NPV)
                </div>
                <div class="card-body">
                    <form id="npvForm">
                        <div class="mb-3">
                            <label for="npvInitialInvestment" class="form-label">Initial Investment</label>
                            <input type="number" class="form-control" id="npvInitialInvestment" placeholder="e.g., 10000" required>
                        </div>
                        <div class="mb-3">
                            <label for="discountRate" class="form-label">Discount Rate (%)</label>
                            <input type="number" class="form-control" id="discountRate" placeholder="e.g., 10" required>
                        </div>
                        <div class="mb-3">
                            <label for="cashFlows" class="form-label">Cash Flows (comma-separated)</label>
                            <input type="text" class="form-control" id="cashFlows" placeholder="e.g., 2000, 3000, 4000, 5000" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Calculate NPV</button>
                    </form>
                    <div class="mt-3" id="npvResult">
                        <!-- NPV result will be displayed here -->
                    </div>
                </div>
            </div>
        </div>

        <div id="irrSection" class="tab-content-section">
            <div class="card mb-4">
                <div class="card-header">
                    Internal Rate of Return (IRR)
                </div>
                <div class="card-body">
                    <form id="irrForm">
                        <div class="mb-3">
                            <label for="irrInitialInvestment" class="form-label">Initial Investment</label>
                            <input type="number" class="form-control" id="irrInitialInvestment" placeholder="e.g., 10000" required>
                        </div>
                        <div class="mb-3">
                            <label for="irrCashFlows" class="form-label">Cash Flows (comma-separated)</label>
                            <input type="text" class="form-control" id="irrCashFlows" placeholder="e.g., 2000, 3000, 4000, 5000" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Calculate IRR</button>
                    </form>
                    <div class="mt-3" id="irrResult">
                        <!-- IRR result will be displayed here -->
                    </div>
                </div>
            </div>
        </div>

        <nav class="tabbar d-md-none">
            <button class="tab-btn active" data-tab="cagrSection" title="CAGR">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 16 16"><path d="M0 0h1v16H0V0zm2 15V1h13v1H3v13H2zm2-2V3h9v1H5v9H4zm2-2V5h5v1H7v5H6zm2-2V7h1v1H8V9H7V8h1V7z"/></svg>
                <span style="font-size:0.9rem;">CAGR</span>
            </button>
            <button class="tab-btn" data-tab="fvSection" title="Future Value">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 16 16"><path d="M8 0a8 8 0 1 0 8 8A8 8 0 0 0 8 0zm0 15A7 7 0 1 1 15 8 7 7 0 0 1 8 15zm0-13a6 6 0 1 0 6 6A6 6 0 0 0 8 2zm0 11a5 5 0 1 1 5-5 5 5 0 0 1-5 5z"/></svg>
                <span style="font-size:0.9rem;">Future</span>
            </button>
            <button class="tab-btn" data-tab="npvSection" title="NPV">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 16 16"><path d="M8 0a8 8 0 1 0 8 8A8 8 0 0 0 8 0zm0 15A7 7 0 1 1 15 8 7 7 0 0 1 8 15zm0-13a6 6 0 1 0 6 6A6 6 0 0 0 8 2zm0 11a5 5 0 1 1 5-5 5 5 0 0 1-5 5z"/></svg>
                <span style="font-size:0.9rem;">NPV</span>
            </button>
            <button class="tab-btn" data-tab="irrSection" title="IRR">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 16 16"><path d="M8 0a8 8 0 1 0 8 8A8 8 0 0 0 8 0zm0 15A7 7 0 1 1 15 8 7 7 0 0 1 8 15zm0-13a6 6 0 1 0 6 6A6 6 0 0 0 8 2zm0 11a5 5 0 1 1 5-5 5 5 0 0 1-5 5z"/></svg>
                <span style="font-size:0.9rem;">IRR</span>
            </button>
        </nav>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script>
        document.getElementById('cagrForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const initialValue = parseFloat(document.getElementById('initialValue').value);
            const finalValue = parseFloat(document.getElementById('finalValue').value);
            const years = parseFloat(document.getElementById('years').value);

            if (isNaN(initialValue) || isNaN(finalValue) || isNaN(years) || initialValue <= 0 || years <= 0) {
                document.getElementById('cagrResult').innerHTML = '<div class="alert alert-danger">Please enter valid positive numbers for all fields.</div>';
                return;
            }

            const cagr = (Math.pow((finalValue / initialValue), (1 / years)) - 1) * 100;

            document.getElementById('cagrResult').innerHTML = `<div class="alert alert-success">CAGR: <strong>${cagr.toFixed(2)}%</strong></div>`;
        });

        document.getElementById('futureValueForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const presentValue = parseFloat(document.getElementById('presentValue').value);
            const interestRate = parseFloat(document.getElementById('interestRate').value);
            const numPeriods = parseFloat(document.getElementById('numPeriods').value);

            if (isNaN(presentValue) || isNaN(interestRate) || isNaN(numPeriods) || presentValue <= 0 || numPeriods <= 0) {
                document.getElementById('futureValueResult').innerHTML = '<div class="alert alert-danger">Please enter valid positive numbers for all fields.</div>';
                return;
            }

            const futureValue = presentValue * Math.pow((1 + (interestRate / 100)), numPeriods);

            document.getElementById('futureValueResult').innerHTML = `<div class="alert alert-success">Future Value: <strong>${futureValue.toFixed(2)}</strong></div>`;
        });

        document.getElementById('npvForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const initialInvestment = parseFloat(document.getElementById('npvInitialInvestment').value);
            const discountRate = parseFloat(document.getElementById('discountRate').value) / 100;
            const cashFlowsInput = document.getElementById('cashFlows').value;
            const cashFlows = cashFlowsInput.split(',').map(flow => parseFloat(flow.trim()));

            if (isNaN(initialInvestment) || isNaN(discountRate) || discountRate <= 0 || cashFlows.some(isNaN)) {
                document.getElementById('npvResult').innerHTML = '<div class="alert alert-danger">Please enter valid numbers for all fields.</div>';
                return;
            }

            let npv = -initialInvestment;
            for (let i = 0; i < cashFlows.length; i++) {
                npv += cashFlows[i] / Math.pow((1 + discountRate), (i + 1));
            }

            document.getElementById('npvResult').innerHTML = `<div class="alert alert-success">NPV: <strong>${npv.toFixed(2)}</strong></div>`;
        });

        document.getElementById('irrForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const initialInvestment = parseFloat(document.getElementById('irrInitialInvestment').value);
            const cashFlowsInput = document.getElementById('irrCashFlows').value;
            const cashFlows = cashFlowsInput.split(',').map(flow => parseFloat(flow.trim()));

            if (isNaN(initialInvestment) || cashFlows.some(isNaN)) {
                document.getElementById('irrResult').innerHTML = '<div class="alert alert-danger">Please enter valid numbers for all fields.</div>';
                return;
            }

            // Simple iterative method to approximate IRR
            const irr = (cashFlows, initialInvestment) => {
                let low = -1.0; // -100%
                let high = 1.0; // 100%
                let guess = 0.1; // Initial guess
                const epsilon = 0.0001; // Desired precision
                const maxIterations = 1000;

                for (let i = 0; i < maxIterations; i++) {
                    let npv = -initialInvestment;
                    for (let j = 0; j < cashFlows.length; j++) {
                        npv += cashFlows[j] / Math.pow((1 + guess), (j + 1));
                    }

                    if (Math.abs(npv) < epsilon) {
                        return guess;
                    } else if (npv > 0) {
                        low = guess;
                    } else {
                        high = guess;
                    }
                    guess = (low + high) / 2;
                }
                return guess; // Return the best guess after max iterations
            };

            const calculatedIrr = irr(cashFlows, initialInvestment);

            document.getElementById('irrResult').innerHTML = `<div class="alert alert-success">IRR: <strong>${(calculatedIrr * 100).toFixed(2)}%</strong></div>`;
        });

        // Dark mode toggle
        const toggleDark = document.getElementById('toggleDark');
        const sunIcon = document.getElementById('sunIcon');
        const moonIcon = document.getElementById('moonIcon');
        toggleDark.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            if(document.body.classList.contains('dark-mode')) {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'inline';
            } else {
                sunIcon.style.display = 'inline';
                moonIcon.style.display = 'none';
            }
        });

        // Tab navigation logic
        const tabBtns = document.querySelectorAll('.tabbar .tab-btn');
        const tabSections = document.querySelectorAll('.tab-content-section');
        tabBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                tabBtns.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                const tab = this.getAttribute('data-tab');
                tabSections.forEach(sec => {
                    if(sec.id === tab) {
                        sec.classList.add('active');
                    } else {
                        sec.classList.remove('active');
                    }
                });
                window.scrollTo({top:0, behavior:'smooth'});
            });
        });
    </script>
</body>
</html>
